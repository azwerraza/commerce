{% extends 'master.html' %}
{% block body %}
<!-- project section-->
<div id="project" class="project">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="titlepage">
          <h2>Searched Result</h2>
        </div>
      </div>
    </div>

    <div class="product-grid-container">
      {% for prod in products %}

      <div class="product-card">
        <div class="product-image">
            <a href="{% url 'product_detail' prod.id %}">
          <img src="{{ prod.image.url }}" alt="{{ prod.name }}" style="height: 300px; width: 100%; object-fit: cover;">

          <!-- Add to Cart Icon Button -->
          <a href="{% url 'cart_add' prod.id %}" class="cart-btn add-to-cart-btn" aria-label="Add to cart">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 7H16V6C16 4.89543 15.1046 4 14 4H10C8.89543 4 8 4.89543 8 6V7H5C4.44772 7 4 7.44772 4 8C4 8.55228 4.44772 9 5 9H6L7 19C7 20.1046 7.89543 21 9 21H15C16.1046 21 17 20.1046 17 19L18 9H19C19.5523 9 20 8.55228 20 8C20 7.44772 19.5523 7 19 7ZM10 6H14V7H10V6Z" fill="currentColor"/>
            </svg>
          </a>
                {% if user.is_authenticated and prod.id in wishlist_items %}
  <a href="{% url 'wishlist_remove' prod.id %}" class="wishlist-btn active" aria-label="Remove from wishlist">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="red">
      <path d="M12.1 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5
               2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5
               2.09C13.09 3.81 14.76 3 16.5
               3 19.58 3 22 5.42 22 8.5c0
               3.78-3.4 6.86-8.55
               11.54L12.1 21.35z" fill="currentColor" />
    </svg>
  </a>
{% else %}
  <a href="{% url 'wishlist_add' prod.id %}" class="wishlist-btn" aria-label="Add to wishlist">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
      <path d="M12.1 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5
               2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5
               2.09C13.09 3.81 14.76 3 16.5
               3 19.58 3 22 5.42 22 8.5c0
               3.78-3.4 6.86-8.55
               11.54L12.1 21.35z" fill="currentColor" />
    </svg>
  </a>
{% endif %}
        </div>

        <div class="product-info">
          <h3 class="product-price">Rs {{ prod.price }}</h3>
          <p class="product-title">{{ prod.name }}</p>
        </div>
      </div>
      {% empty %}
    <div class="text-center no-results-container">
  <p>No products found matching your search.</p>
  <a href="{% url 'index' %}" class="return-home-btn">Return Back to Home</a>
</div>

  {% endfor %}
    </div>

  </div>
</div>


      <!-- end project section -->
{% endblock %}