<div id="chatbox" style="width:400px; border:1px solid #ccc; padding:10px; font-family: Arial, sans-serif;">
  <div id="chatlog" style="height:300px; overflow-y:auto; border:1px solid #ddd; padding:5px; margin-bottom:10px;"></div>
  <input type="text" id="userInput" placeholder="Type your message..." style="width:80%; padding:5px;" />
  <button onclick="sendMessage()" style="padding:5px 10px;">Send</button>
</div>

<script>
  function appendMessage(sender, text) {
    const chatlog = document.getElementById("chatlog");
    const msg = document.createElement("p");
    msg.style.margin = "5px";
    msg.innerHTML = `<strong>${sender}:</strong> ${text}`;
    chatlog.appendChild(msg);
    chatlog.scrollTop = chatlog.scrollHeight;
  }

  function sendMessage() {
    const input = document.getElementById("userInput");
    const message = input.value.trim();
    if (!message) return;
    appendMessage("You", message);
    input.value = "";

    fetch(`/chatbot/?message=${encodeURIComponent(message)}`)
      .then(response => response.json())
      .then(data => {
        appendMessage("Bot", data.reply);
      })
      .catch(() => {
        appendMessage("Bot", "Sorry, something went wrong.");
      });
  }

  // Optional: allow Enter key to send message
  document.getElementById("userInput").addEventListener("keypress", function(e) {
    if (e.key === "Enter") {
      sendMessage();
    }
  });
</script>
