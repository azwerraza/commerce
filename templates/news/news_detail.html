{% extends 'master.html' %}

{% block body %}
<style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Helvetica Neue', Arial, sans-serif;
        }

        body {
            background-color: #f9f9f9;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .blog-header {
            text-align: center;
            padding: 40px 0 20px;
        }

        .blog-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
            letter-spacing: 1px;
        }

        .blog-meta {
            color: #777;
            font-size: 0.9rem;
            margin-bottom: 30px;
        }

        /* Featured Image */
        .featured-image {
            width: 100%;
            max-height: 600px;
            object-fit: cover;
            margin-bottom: 40px;
            border-radius: 4px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        /* Blog Content */
        .blog-content {
            display: flex;
            gap: 40px;
            margin-bottom: 60px;
        }

        .main-content {
            flex: 2;
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .sidebar {
            flex: 1;
        }

        .section {
            margin-bottom: 30px;
        }

        .section h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            font-weight: 400;
            color: #222;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        .section p {
            margin-bottom: 20px;
        }

        /* Shop Section */
        .shop-section {
            background: #f5f5f5;
            padding: 30px;
            border-radius: 8px;
            margin: 40px 0;
        }

.product-grid-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

.product-card {
  border: 1px solid #ddd;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  transition: transform 0.3s ease;
  background: #fff;
}

.product-card:hover {
  transform: translateY(-5px);
}

.product-image {
  position: relative;
}

.cart-btn {
  position: absolute;
  bottom: 10px;
  right: 10px;
  background-color: #000;
  color: white;
  padding: 8px;
  border-radius: 50%;
  text-decoration: none;
}

.product-info {
  padding: 10px;
  text-align: center;
}

.product-title {
  font-size: 18px;
  font-weight: 600;
  margin: 5px 0;
}

.product-price {
  color: #666;
  font-size: 14px;
}


/* For 2-per-row layout */
@media (min-width: 500px) {
    .shop-item {
        width: calc(50% - 20px); /* Accounts for gap */
    }
}

/* For 3-per-row on larger screens */
@media (min-width: 768px) {
    .shop-item {
        width: calc(33.33% - 20px);
    }
}

        /* Comments */
        .comments-section {
            margin-top: 60px;
        }

        .comment-form {
            margin-top: 30px;
        }

        .comment-form textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 15px;
            min-height: 100px;
        }

        .submit-btn {
            background: #333;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .submit-btn:hover {
            background: #555;
        }

        /* Related Posts */
        .related-posts {
            margin: 60px 0;
        }

        .related-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        .related-post {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }

        .related-post:hover {
            transform: translateY(-5px);
        }

        .related-post img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .related-post h3 {
            padding: 15px;
            font-size: 1.1rem;
            font-weight: 400;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .blog-content {
                flex-direction: column;
            }

            .related-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="blog-header">
            <h1 class="blog-title">{{ news_item.title }}</h1>
            <div class="blog-meta">Published on {{ news_item.created_at|date:"F j, Y" }} Â· {{ news_item.read_time }}-min read</div>
        </header>

        <img src="https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Summer fashion styling" class="featured-image">

<div class="blog-content">
    <main class="main-content">
        <div class="section">
            <h2>Introduction</h2>
            <p>{{ news_item.intro }}</p>
        </div>

        <div class="section">
            <h2>Daytime Look</h2>
            <p>{{ news_item.daytime_look|linebreaks }}</p>
        </div>

        <div class="section">
            <h2>Transitioning to Evening</h2>
            <p>{{ news_item.evening_look|linebreaks }}</p>
        </div>

<div class="shop-section">
    <h2>Shop the Post</h2>
    <p>All items featured in this styling guide</p>

    <div class="product-grid-container">
        {% for prod in news_item.related_products.all %}
        <div class="product-card">
            <div class="product-image">
                <a href="{% url 'product_detail' prod.id %}">
                    <img src="{{ prod.image.url }}" alt="{{ prod.name }}" style="height: 300px; width: 100%; object-fit: cover;">
                </a>

                <!-- Add to Cart Icon Button -->
                <a href="{% url 'cart_add' prod.id %}" class="cart-btn add-to-cart-btn" aria-label="Add to cart">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 7H16V6C16 4.89543 15.1046 4 14 4H10C8.89543 4 8 4.89543 8 6V7H5C4.44772 7 4 7.44772 4 8C4 8.55228 4.44772 9 5 9H6L7 19C7 20.1046 7.89543 21 9 21H15C16.1046 21 17 20.1046 17 19L18 9H19C19.5523 9 20 8.55228 20 8C20 7.44772 19.5523 7 19 7ZM10 6H14V7H10V6Z" fill="currentColor"/>
                    </svg>
                </a>
            </div>

            <div class="product-info">
                <h3 class="product-title">Rs {{ prod.price }}</h3>
                <p class="product-price">{{ prod.name }}</p>
            </div>
        </div>
        {% empty %}
        <p>No related products found for this post.</p>
        {% endfor %}
    </div>
</div>


        <div class="section">
            <h2>Final Thoughts</h2>
            <p>{{ news_item.content|linebreaks }}</p>
        </div>

        <div class="comments-section">
            <h2>Leave a Comment</h2>
            <p>We'd love to hear your thoughts on this styling guide</p>
            <form method="POST" class="comment-form">
                {% csrf_token %}
                {{ form.non_field_errors }}
                {{ form.name.errors }}
                {{ form.name }}
                {{ form.content.errors }}
                {{ form.content }}
                <button type="submit" class="submit-btn">Post Comment</button>
            </form>
        </div>

        <div class="existing-comments">
            <h3>Comments</h3>
            {% for comment in comments %}
                <div class="comment">
                    <p><strong>{{ comment.name }}</strong> said:</p>
                    <p>{{ comment.content }}</p>
                    <small>{{ comment.created_at|date:"F j, Y, g:i a" }}</small>
                </div>
            {% empty %}
                <p>No comments yet. Be the first!</p>
            {% endfor %}
        </div>
    </main> <!-- This closes the main-content div -->

    <aside class="sidebar">
        <div class="section">
            <h2>About the Store</h2>
            <p><strong>Timeless Trends</strong>, Fashion Stylist at Your Store</p>
            <p>With over 10 years of experience in the fashion industry, Jane specializes in creating versatile looks that work for real life. Her styling philosophy focuses on comfort, sustainability, and timeless elegance.</p>
        </div>

        <div class="section">
            <h2>Categories</h2>
            <ul>
                <li>Styling Guides</li>
                <li>New Arrivals</li>
                <li>Sustainable Fashion</li>
                <li>Seasonal Trends</li>
                <li>Customer Spotlights</li>
            </ul>
        </div>

        <div class="section">
    <h2>Subscribe</h2>
    <p>Get the latest posts and exclusive offers straight to your inbox.</p>

    {% if messages %}
  {% for message in messages %}
    <div class="alert">{{ message }}</div>
  {% endfor %}
{% endif %}

<form method="POST">
  {% csrf_token %}
  {{ form.email.errors }}
  {{ form.email }}
  <button type="submit" class="submit-btn">Subscribe</button>
</form>

</div>
    </aside>
</div>

       <div class="related-posts">
    <h2>You Might Also Like</h2>
    <div class="related-grid">
        {% for related in related_posts %}
            <div class="related-post">
                <a href="{% url 'news_detail' slug=related.slug %}">
                    <img src="{{ related.image.url }}" alt="{{ related.title }}">
                    <h3>{{ related.title }}</h3>
                </a>
            </div>
        {% empty %}
            <p>No related posts found.</p>
        {% endfor %}
    </div>
</div>

    </div>
</body>
</html>
{% endblock %}